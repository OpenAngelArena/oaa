modifier_duel_invulnerability = class({})

function modifier_duel_invulnerability:IsHidden() return true end
function modifier_duel_invulnerability:IsPurgable()	return false end
function modifier_duel_invulnerability:DestroyOnExpire() return true end

function modifier_duel_invulnerability:CheckState()
  return {
    [MODIFIER_STATE_INVULNERABLE] = true,
    [MODIFIER_STATE_MAGIC_IMMUNE] = true,
  }
end

function modifier_duel_invulnerability:OnCreated()
	local parent = self:GetParent()
  if IsServer() then
    -- Disjoint disjointable projectiles
    ProjectileManager:ProjectileDodge(parent)

    -- Absolute Purge (Strong Dispel + removing most undispellable buffs and debuffs)
    parent:AbsolutePurge()
  end
end

function modifier_duel_invulnerability:DeclareFunctions()
  return {
    MODIFIER_PROPERTY_ABSOLUTE_NO_DAMAGE_PHYSICAL,
    MODIFIER_PROPERTY_ABSOLUTE_NO_DAMAGE_MAGICAL,
    MODIFIER_PROPERTY_ABSOLUTE_NO_DAMAGE_PURE,
  }
end

function modifier_duel_invulnerability:GetAbsoluteNoDamagePhysical()
  return 1
end

function modifier_duel_invulnerability:GetAbsoluteNoDamageMagical()
  return 1
end

function modifier_duel_invulnerability:GetAbsoluteNoDamagePure()
  return 1
end
